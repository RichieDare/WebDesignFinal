<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Game</title>

	<style>
		body{
			background-image: url("pictures/bg.jpg");
			background-position: top;
			position:absolute;
			left:20px;
			right:20px;
			width: 1200px;
  			margin: 0 auto;
  			width: 1200px;
		}

		#pageTitle{
			text-align: center;
		}
		/*menu bar style*/
		#mainmenu {
    		list-style-type: none;
    		margin: 0;
    		padding: 0;
    		overflow: hidden;
    		background-color: white;
    		border-bottom-style: solid;
    		border-bottom-color:white ;
		}

		li {
    		float: left;
		}

		li a {
    		display: block;
    		color: black;
    		text-align: center;
    		padding: 14px 16px;
    		text-decoration: none;
    		margin-right: 10px;
    		margin-left: 10px;
    		font-size: 20px;
		}

		.active, li a:hover{
    		border-bottom-style: solid;
    		border-bottom-color:#08298A ;
    		color: #08298A;
		}

		#bodyBlock{
			background-color:white;
			opacity: 0.8;
			position:absolute;
			align-self:center;
			height:650px;
			right:50px;
			left:50px;
		}

		#contentTitle{
			margin-left: 50px;
			margin-top:50px;
		}

		#contentText{
			margin-left: 50px;
			margin-top: 30px;
		}

		table{
			border:1px solid black;
			margin-left:auto; 
   			margin-right:auto;
		}
		td{
			height: 100px;
			width: 100px;
			border:1px solid black;
		}
		.gameBtn{
			height:100px;
			width:100px;
			font-size: 20px;
		}

	</style>

</head>

<body>
	<div id="bodyBlock">

		<h1 id="pageTitle"><b>The Game</b></h1>
	
		<!-- menu bar -->
		<ul id="mainmenu">
 			<li><a href="#home">Home</a></li>
  			<li><a class="active" href="game.html">Game</a></li>
  			<li><a href="#page2">Page 2</a></li>
  			<li><a href="#page3">Page 3</a></li>
  			<li><a href="#contact">Contact Us</a></li>
  			<li><a href="aboutUs.html">About Us</a></li>
		</ul>

		<h2 id="contentTitle">
			Sliding Puzzle Game
		</h2>

		<!-- game board -->
		<table>
  			<tr>
   				<td><button class="gameBtn" id="1" onclick="swap(1)"></button></th>
   				<td><button class="gameBtn" id="2" onclick="swap(2)"></button></th>
   				<td><button class="gameBtn" id="3" onclick="swap(3)"></button></th>
  			</tr>
  			<tr>
    			<td><button class="gameBtn" id="4" onclick="swap(4)"></button></td>
    			<td><button class="gameBtn" id="5" onclick="swap(5)"></button></td>
    			<td><button class="gameBtn" id="6" onclick="swap(6)"></button></td>
			</tr>
			<tr>
    			<td><button class="gameBtn" id="7" onclick="swap(7)"></button></td>
    			<td><button class="gameBtn" id="8" onclick="swap(8)"></button></td>
    			<td><button class="gameBtn" id="9" onclick="swap(9)"></button></td>
			</tr>
		</table>
		
		<script>
			/*-------------INITIALIZE GAMEBOARD----------------*/
			//create gameboard
			var board=[[0,0,0],
			           [0,0,0],
			           [0,0,0]];
			//randomize gameboard
			randomize();
			/*-------------------------------------------------*/


			//swaps clicked block with empty spot
			function swap(position){
				//check if blank is clicked
				if(document.getElementById(position+"").innerHTML==""){
					return;
				}
				//check if clicked tile is next to blank
				//check right
				if((position % 3!=0) && document.getElementById((position+1)+"").innerHTML==""){
					console.log("move this to the right");
					//swap the innerHTML's
					document.getElementById((position+1)+"").innerHTML=document.getElementById(position).innerHTML;
					document.getElementById(position).innerHTML="";
				}
				//check left
				if((position % 3 !=1) && document.getElementById((position-1)+"").innerHTML==""){
					console.log("move this to the left");
					//swap the innerHTML's
					document.getElementById((position-1)+"").innerHTML=document.getElementById(position).innerHTML;
					document.getElementById(position).innerHTML="";
				}
				//check top
				if((position>=4) && document.getElementById((position-3)+"").innerHTML==""){
					console.log("move this up");
					//swap the innerHTML's
					document.getElementById((position-3)+"").innerHTML=document.getElementById(position).innerHTML;
					document.getElementById(position).innerHTML="";
				}
				//check bot
				if((position<=6) && document.getElementById((position+3)+"").innerHTML==""){
					console.log("move this down");
					//swap the innerHTML's
					document.getElementById((position+3)+"").innerHTML=document.getElementById(position).innerHTML;
					document.getElementById(position).innerHTML="";
				}


				//after swapping, check if user has won
				var i;
				var match=0;
				for(i=1;i<9;i++){//check every slot and see if they match the position id
					if(document.getElementById(i+"").innerHTML==i){
						match++;
					}
				}
				if(match==8){
					alert("Congratulations! You have won!");
				}
			}
			//randomize gameboard
			function randomize(){
				var r;
				var i,j;
				for(i=0; i<3; i++){
					for(j=0; j<3; j++){
						//check if board already contains the random value
						do{
							r=Math.floor(Math.random() * 10);
							console.log(r);
						}while(contains(r))

						board[i][j]= r;
					}
				}
				console.log(board);
				//update the board
				updateBoard();
			}
			//checks if gameboard already contains certain value
			function contains(r){
				var i,j;
				for(i=0;i<3;i++){
					for(j=0;j<3;j++){
						if(board[i][j]!=null && board[i][j]==r){
							return true;
						}
					}
				}
				return false;
			}
			//updates/initialize board
			function updateBoard(){
				var i,j;
				var btnindex=0;
				for(i=0;i<3;i++){
					for(j=0;j<3;j++){
						btnindex++;
						document.getElementById(btnindex+"").innerHTML=board[i][j];
						if(board[i][j]==9){
							document.getElementById(btnindex+"").innerHTML="";
							document.getElementById(btnindex+"").active=false;
						}
					}
				}

				
			}
		</script>




	</div>
</body>
</html>
